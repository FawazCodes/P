<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comprehensive Tracking Test Page with Enhancements</title>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QZPVR2MV7X"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-QZPVR2MV7X');

      // Track page views
      function trackPageView() {
        gtag('event', 'page_view', {
          'page_title': document.title,
          'page_location': window.location.href,
          'page_path': window.location.pathname
        });
      }

      // Track option selection
      function trackOptionSelection(option) {
        gtag('event', 'select_content', {
          'content_type': 'option',
          'item_id': option
        });
      }

      // Track when leaving the page
      function trackLeavePage(event) {
        gtag('event', 'leave_page', {
          'event_label': 'VisibilityChange',
          'event_category': 'Engagement',
          'non_interaction': true
        });
      }

      // Track button clicks
      function trackButtonClick(buttonName) {
        gtag('event', 'button_click', {
          'event_category': 'Button',
          'event_label': buttonName
        });
      }

      // Track scroll depth
      let trackedSections = {section1: false, section2: false, section3: false};
      window.onscroll = function() {
        const scrollPosition = window.scrollY + window.innerHeight;
        Object.keys(trackedSections).forEach(section => {
          const elem = document.getElementById(section);
          if (scrollPosition > elem.offsetTop && !trackedSections[section]) {
            gtag('event', 'scroll_depth', {
              'event_category': 'Scroll',
              'event_label': section,
              'value': Math.round((scrollPosition / document.body.offsetHeight) * 100)
            });
            trackedSections[section] = true;
          }
        });
      };

      // Track page load performance
      window.addEventListener('load', (event) => {
        const timing = window.performance.timing;
        const loadTime = timing.loadEventEnd - timing.navigationStart;
        gtag('event', 'load_performance', {
          'event_category': 'Performance',
          'event_label': 'Page Load Time',
          'value': loadTime
        });
      });

      document.addEventListener('visibilitychange', function() {
        if (document.visibilityState === 'hidden') {
          trackLeavePage();
        }
      });

      // Track exit intent
      document.addEventListener('mouseout', function(event) {
        if (!event.toElement && !event.relatedTarget) {
          gtag('event', 'exit_intent', {
            'event_category': 'Engagement',
            'event_label': 'Mouse Out'
          });
        }
      });

      // Ensure page view is tracked on load
      window.onload = function() {
        trackPageView();
      }
    </script>
</head>
<body>

<h1>Welcome to the Comprehensive Tracking Test Page</h1>
<p>Interact with the elements below to generate tracking data without tracking text input.</p>

<!-- Dropdown for Option Selection -->
<div>
    <label for="options">Choose an option:</label>
    <select name="options" id="options" onchange="trackOptionSelection(this.value)">
        <option value="Option 1">Option 1</option>
        <option value="Option 2">Option 2</option>
        <option value="Option 3">Option 3</option>
    </select>
</div>

<!-- Textbox for Typing Simulation -->
<div>
    <label for="typingTest">Test Typing Here:</label>
    <input type="text" id="typingTest" name="typingTest" placeholder="Type something...">
</div>

<!-- Button for Click Tracking -->
<div>
    <button id="submitButton" onclick="trackButtonClick('Submit')">Submit</button>
</div>

<!-- Content Sections for Interaction and Scroll Depth Tracking -->
<section id="section1">
    <h2>Section 1</h2>
    <p>This is the content of Section 1. Interact here for engagement tracking.</p>
</section>

<section id="section2">
    <h2>Section 2</h2>
    <p>This is the content of Section 2. Another area for engagement interaction.</p>
</section>

<section id="section3">
    <h2>Section 3</h2>
    <p>And this is Section 3. Your engagement here is also tracked.</p>
</section>

</body>
</html>
